# =============================================================================
# Zerodha Trading System - Environment Configuration Template
# =============================================================================
# Copy this file to .env and fill in your actual values
# DO NOT commit .env to version control - it contains sensitive credentials
# =============================================================================

# -----------------------------------------------------------------------------
# API Keys - Trading Platform
# -----------------------------------------------------------------------------
# Zerodha Kite API credentials (required for Zerodha trading)
KITE_API_KEY=your_kite_api_key_here
KITE_API_SECRET=your_kite_api_secret_here

# -----------------------------------------------------------------------------
# LLM Provider Configuration
# -----------------------------------------------------------------------------
# Supported providers: groq, openai, azure, ollama, huggingface, together, gemini
LLM_PROVIDER=groq
LLM_MODEL=llama-3.3-70b-versatile
LLM_TEMPERATURE=0.3
MAX_TOKENS=2000

# OpenAI API (if using OpenAI provider)
OPENAI_API_KEY=your_openai_api_key_here

# Groq API (if using Groq provider)
GROQ_API_KEY=your_groq_api_key_here

# Azure OpenAI (if using Azure provider)
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com/
AZURE_OPENAI_API_KEY=your_azure_openai_api_key_here
AZURE_OPENAI_API_VERSION=2024-02-15-preview

# Hugging Face API (if using Hugging Face provider)
HUGGINGFACE_API_KEY=your_huggingface_api_key_here

# Together AI API (if using Together provider)
TOGETHER_API_KEY=your_together_api_key_here

# Google API (if using Gemini provider)
GOOGLE_API_KEY=your_google_api_key_here

# OpenRouter API (if using OpenRouter provider)
OPENROUTER_API_KEY=your_openrouter_api_key_here

# Ollama (local LLM - if using Ollama provider)
OLLAMA_BASE_URL=http://localhost:11434

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
MONGODB_URI=mongodb://localhost:27017/
MONGODB_DB_NAME=zerodha_trading
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0

# -----------------------------------------------------------------------------
# Trading Parameters
# -----------------------------------------------------------------------------
# Maximum position size as percentage of account (default: 5.0%)
MAX_POSITION_SIZE_PCT=5.0
# Maximum leverage allowed (default: 2.0 = 1:2 leverage)
MAX_LEVERAGE=2.0
# Maximum number of concurrent trades (default: 3)
MAX_CONCURRENT_TRADES=3
# Daily loss limit as percentage (default: 2.0%)
DAILY_LOSS_LIMIT_PCT=2.0
# Order timeout in seconds (default: 30)
ORDER_TIMEOUT_SECONDS=30

# -----------------------------------------------------------------------------
# Risk Management
# -----------------------------------------------------------------------------
# Default stop loss percentage (default: 1.5%)
DEFAULT_STOP_LOSS_PCT=1.5
# Default take profit percentage (default: 3.0%)
DEFAULT_TAKE_PROFIT_PCT=3.0
# Maximum drawdown percentage before halting trading (default: 15.0%)
MAX_DRAWDOWN_PCT=15.0

# -----------------------------------------------------------------------------
# Market Data - Instrument Configuration
# -----------------------------------------------------------------------------
# Trading symbol (e.g., NIFTY BANK, NIFTY 50, BTC-USD)
INSTRUMENT_SYMBOL=NIFTY BANK
# Display name (e.g., Bank Nifty, Nifty 50, Bitcoin)
INSTRUMENT_NAME=Bank Nifty
# Exchange (NSE, CRYPTO, BINANCE, etc.)
INSTRUMENT_EXCHANGE=NSE
# Optional: Direct token if known
INSTRUMENT_TOKEN=

# -----------------------------------------------------------------------------
# Data Source Configuration
# -----------------------------------------------------------------------------
# Data source: ZERODHA, CRYPTO, BINANCE, etc.
DATA_SOURCE=ZERODHA
# Additional API key for data source (if needed)
DATA_SOURCE_API_KEY=
# Additional secret for data source (if needed)
DATA_SOURCE_SECRET=

# -----------------------------------------------------------------------------
# News Configuration
# -----------------------------------------------------------------------------
# Finnhub API key for news (optional, used if available)
FINNHUB_API_KEY=your_finnhub_api_key_here
# EODHD API key for news (optional, used if available) 
EODHD_API_KEY=your_eodhd_api_key_here
# News query string for filtering relevant news
NEWS_QUERY=Bank Nifty OR banking sector OR RBI
# Comma-separated keywords for news filtering
NEWS_KEYWORDS=Bank Nifty,banking sector,RBI
# News update interval in minutes (default: 5)
NEWS_UPDATE_INTERVAL_MINUTES=5
# Sentiment update interval in minutes (default: 10)
SENTIMENT_UPDATE_INTERVAL_MINUTES=10

# -----------------------------------------------------------------------------
# Macro Data Configuration
# -----------------------------------------------------------------------------
# Enable RBI/macro data (set to false for crypto trading)
MACRO_DATA_ENABLED=true
# Crypto-specific macro indicators (if applicable)
CRYPTO_MACRO_INDICATORS=

# -----------------------------------------------------------------------------
# Market Hours
# -----------------------------------------------------------------------------
# Market open time (HH:MM:SS format)
MARKET_OPEN_TIME=09:15:00
# Market close time (HH:MM:SS format)
MARKET_CLOSE_TIME=15:30:00
# Enable 24/7 trading (true for crypto, false for stocks)
MARKET_24_7=false

# -----------------------------------------------------------------------------
# Monitoring & Alerts
# -----------------------------------------------------------------------------
# Enable alerts (default: true)
ENABLE_ALERTS=true
# Slack webhook URL for alerts (optional)
SLACK_WEBHOOK_URL=
# Email address for alerts (optional)
EMAIL_ALERTS=

# -----------------------------------------------------------------------------
# Paper Trading Mode
# -----------------------------------------------------------------------------
# Start in paper trading mode (default: true)
# IMPORTANT: Set to false only after thorough testing!
PAPER_TRADING_MODE=true

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO
# Optional: Log file path (if not set, logs to console)
LOG_FILE=

# -----------------------------------------------------------------------------
# Feature Flags (for gradual rollout and production safety)
# -----------------------------------------------------------------------------
# Enable JSON validation retry for incomplete LLM responses (default: true)
# When enabled, retries incomplete JSON up to 3 times with stronger prompts
ENABLE_JSON_VALIDATION_RETRY=true

# Enable circuit breaker pattern for LLM providers and endpoints (default: true)
# When enabled, temporarily skips failing providers to prevent cascading failures
ENABLE_CIRCUIT_BREAKER=true

# Enable background health monitoring for LLM providers (default: true)
# When enabled, checks provider health every 60 seconds and attempts auto-recovery
ENABLE_HEALTH_MONITORING=true

# Enable token quota enforcement (default: false - set to true to hard-block requests)
# When enabled, rejects requests when daily token quota is reached (prevents overage charges)
# WARNING: Only enable after setting daily_token_quota in provider configs
ENABLE_TOKEN_QUOTA_ENFORCEMENT=false

